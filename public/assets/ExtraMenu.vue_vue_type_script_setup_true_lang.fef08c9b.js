import{d as h,ad as n,E as x,H as y,S as u,z as e,V as r,Z as d,ae as p}from"./main.78b17f62.js";import{g}from"./useStore.0843e9fa.js";import{u as V}from"./useStore.d23d0a49.js";import{_ as b}from"./BaseQuestionTooltip.vue_vue_type_script_setup_true_lang.df8891af.js";import{V as k}from"./VMenu.54b2c8f2.js";import{V as z,a as l,b as c}from"./VList.4ad28452.js";import{a as S}from"./VBtn.320fdb24.js";const j=h({__name:"ExtraMenu",props:{name:null,item:null,is_mcht:{type:Boolean}},setup(f){const a=f,{printer:D}=V(),v=n("store"),i=n("alert"),o=n("snackbar"),B=n("$errorHandler"),m=async(t,s)=>{try{const w="/api/v1/manager/transactions/settle-histories/"+(a.is_mcht?"merchandises":"salesforces")+"/"+t,$=await p({url:w,method:s});o.value.show("\uC131\uACF5\uD558\uC600\uC2B5\uB2C8\uB2E4.","success"),v.setTable()}catch(C){o.value.show(C.response.data.message,"error"),B(C)}},A=async()=>{const t=a.item.status?"\uC785\uAE08\uCDE8\uC18C\uCC98\uB9AC":"\uC785\uAE08\uCC98\uB9AC";await i.value.show("\uC815\uB9D0 "+t+" \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&m(a.item.id.toString()+"/deposit","post")},E=async()=>{await i.value.show("\uC815\uB9D0 \uC815\uC0B0\uCDE8\uC18C \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?")&&m(a.item.id.toString(),"delete")},_=async()=>{if(await i.value.show("\uC815\uC0B0\uB9E4\uCD9C\uC744 \uB2E4\uC6B4\uB85C\uB4DC \uD558\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?"))try{const t={page:1,page_size:99999999};if(a.is_mcht)t.mcht_settle_id=a.item.id;else{const C=g(a.item.level);t["sales"+C+"_settle_id"]=a.item.id}const s=await p.get("/api/v1/manager/transactions",{params:t});o.value.show("\uC5D1\uC140 \uCD9C\uB825\uC911 \uC785\uB2C8\uB2E4..","success"),D(1,s.data.content),o.value.show("\uC131\uACF5\uD558\uC600\uC2B5\uB2C8\uB2E4.","success")}catch(t){o.value.show(t.response.data.message,"error"),B(t)}};return(t,s)=>(x(),y(S,{icon:"",size:"x-small",color:"default",variant:"text"},{default:u(()=>[e(r,{size:"22",icon:"tabler-dots-vertical"}),e(k,{activator:"parent"},{default:u(()=>[e(z,null,{default:u(()=>[e(l,{value:"deposit",onClick:s[0]||(s[0]=C=>A())},{prepend:u(()=>[e(r,{size:"24",class:"me-3",icon:"tabler:report-money"})]),default:u(()=>[e(c,null,{default:u(()=>[d("\uC785\uAE08\uCC98\uB9AC")]),_:1})]),_:1}),e(l,{value:"cancel",onClick:s[1]||(s[1]=C=>E())},{prepend:u(()=>[e(r,{size:"24",class:"me-3",icon:"tabler:device-tablet-cancel"})]),default:u(()=>[e(c,null,{default:u(()=>[d("\uC815\uC0B0\uCDE8\uC18C")]),_:1})]),_:1}),e(l,{value:"download",onClick:s[2]||(s[2]=C=>_())},{prepend:u(()=>[e(r,{size:"24",class:"me-3",icon:"vscode-icons:file-type-excel"})]),default:u(()=>[e(c,null,{default:u(()=>[e(b,{location:"bottom",text:"\uC815\uC0B0\uB9E4\uCD9C \uB2E4\uC6B4\uB85C\uB4DC",content:"\uD574\uB2F9 \uC815\uC0B0\uC5D0 \uC0AC\uC6A9\uB418\uC5C8\uB358 \uB9E4\uCD9C\uAC74\uB4E4\uC774 \uB2E4\uC6B4\uB85C\uB4DC \uB429\uB2C8\uB2E4.(\uCD94\uAC00\uCC28\uAC10\uC561\uC740 \uCD94\uCD9C\uB418\uC9C0 \uC54A\uC2B5\uB2C8\uB2E4.)"},null,8,["content"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{j as _};
