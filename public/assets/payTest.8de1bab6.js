import{u as w,p as P}from"./useStore.194a0dae.js";import{u as F}from"./useStore.c36cbb1c.js";import{p as S}from"./pay.15a678b5.js";import{u as T}from"./useStore.5309c7ea.js";import{a as A,c as x,a2 as f}from"./main.78b17f62.js";const k=n=>{const{pgs:r}=T(),{pay_modules:i,getAllPayModules:_}=w(),{merchandises:u,getAllMerchandises:h}=F(),{pgTypeToPath:v,pmod_id:o,pg_id:s,is_old_auth:p,installment:d,merchandise:c,pg_type:m,pay_url:y}=S(n),l=A(),g=new URL(window.location.href).origin+"/transactions/pay-test/result";h(n),_();const M=x(()=>{var a;const t=i.filter(e=>e.mcht_id==l.value&&e.module_type==2);return o.value=(a=P(i,t,o.value))!=null?a:0,t});return f(()=>{var a;const t=i.find(e=>e.id==o.value);t&&(c.value=u.find(e=>e.id==l.value),p.value=Boolean(t.is_old_auth),d.value=t.installment,s.value=(a=t.pg_id)!=null?a:0)}),f(()=>{var t;if(r.length>0&&s.value){const a=r.find(e=>e.id==s.value);m.value=v((t=a.pg_type)!=null?t:1)}}),{mcht_id:l,pmod_id:o,pg_id:s,pg_type:m,installment:d,return_url:g,pay_url:y,merchandise:c,merchandises:u,is_old_auth:p,filterPayMod:M,pgs:r}};export{k as p};
